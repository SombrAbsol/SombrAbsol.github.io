<!DOCTYPE html>
<html>
<head>
<title>Générateur de Lettres Miracle S (PDM2C)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="Générateur français de Lettres Miracle S pour Pokémon Donjon Mystère : Explorateurs du Ciel.">
<link rel="stylesheet" type="text/css" href="./lmoutils.css">
    <script type="text/javascript" src="./lmutils.js"></script>
		<script type="text/javascript" src="./lm.js"></script>
		<script type="text/javascript" src="./lmgenerate.js"></script>

		<script type="text/javascript" src="./ciel_donjon.js"></script>
		<script type="text/javascript" src="./ciel_objet.js"></script>
		<script type="text/javascript" src="./ciel_poke.js"></script>
</head>
	<body onload="runOnLoad()">
		<script type="text/javascript">
		/**
		 * The purpose of this function is to properly initialize the generator.
		 * It will run on load by default unless the user is using IE6.
		 */
		function runInitialize() {
			WMSGen.advanced = (document.location.search.indexOf('advanced') != -1);
			WMSGen.setup($('genForm'));
		}
		
		// Run initialize by default.
		runOnLoad = runInitialize;
		
		// This is used in wm.js.
		function getOption(name) {
			switch(name) {
				default:
					return false;
				break;
			}
		}
		
		// Don't allow option setting on this page.
		function setOption(name, value) {
			return false;
		}
		
		var generatedThisSession = false;
		function doGenerate() {
			// Check for errors
			var errors = WMSGen.verify();
			if(errors.length == 0) {
				var code = WMSGen.generate();
				$('outputbox').value = code;
				
				// See how many people are actually using this thing...
				if(typeof(_gaq) != 'undefined' && !generatedThisSession && (navigator.onLine || typeof(navigator.onLine) != 'boolean')) {
					if(typeof(_gaq.push) != 'undefined') {
						_gaq.push(['_trackPageview', "/wms/generator/generated"]);
						generatedThisSession = true;
					}
				}
			}
			else {
				var errorStr = "";
				for(var i = 0; i < errors.length; ++i) {
					errorStr += " * " + errors[i] + "\n";
				}
				$('outputbox').value = errorStr;
			}
		}
		</script>
		<h1>Générateur de Lettres Miracle S</h1>

		<p>Utilisez cet outil pour générer une Lettre Miracle S.</p>
		<p>Notez qu'il s'agit d'une version bêta et qu'elle le restera probablement pour toujours (en raison de certains mystères sérieux et du manque de temps pour faire des recherches). Pour cette raison, certains paramètres ne sont disponibles qu'avec le mode avancé, que vous pouvez activer <a href="https://sombrabsol.github.io/EdC/lmmiracles?advanced=1">ici</a>.<p>
		<!-- To enable advanced mode, add the ?advanced=1 query parameter. -->
		<p id="advancedMode" style="display: none"><strong>Mode avancé activé</strong> : vous utilisez actuellement le mode avancé. Les donjons et les clients ne génèrent pas tous des mots de passe valides. Pour le désactiver, cliquez <a href="https://sombrabsol.github.io/EdC/lmmiracles">ici</a>.</p>
		<p>Source : <a href="https://web.archive.org/web/20170912231300/http://apointlessplace.net:80/wms/wmgenerate.html">http://apointlessplace.net/wms/wmgenerate.html</a>
		
		<form id="genForm">
			<fieldset>
				<legend>Générer un code</legend>
				
				<p>
					<label for="missionTypeBox">Type de mission :</label>
					<select name="missionTypeBox" id="missionTypeBox" onchange="WMSGen.fillSubTypeList(); WMSGen.update()"></select>
					
					<span id="subType" style="display: none"><select name="missionSubTypeBox" id="missionSubTypeBox" onchange="WMSGen.update()"></select></span>
				</p>

				<p>
					<label for="dungeonBox">Donjon :</label>
					<select id="dungeonBox" name="dungeonBox"></select>
				</p>
				
				<p>
					<label for="floor">Étage :</label>
					<input id="floor" name="floor" type="text" size="4" value="1">
				</p>
				
				<p>
					<label for="clientBox">Client :</label>
					<select name="clientBox" id="clientBox"></select>
					femelle : <input type="checkbox" name="clientF" id="clientF" value="600">
				</p>

				<p>
					<label for="targetBox">Cible :</label>
					<select name="targetBox" id="targetBox"></select>
					femelle : <input type="checkbox" name="targetF" id="targetF" value="600" disabled="">
				</p>
				
				<p id="target2">
					<label for="target2Box">Cible supplémentaire :</label>
					<select name="target2Box" id="target2Box"></select> femelle : <input type="checkbox" name="target2F" id="target2F" value="600">
				</p>
				
				<p>
					<label for="targetItemBox">Objet cible :</label>
					<select name="targetItemBox" id="targetItemBox"></select>
				</p>
				
				<p>
					<label for="rewardTypeBox">Type de récompense :</label>
					<select name="rewardTypeBox" id="rewardTypeBox" onchange="WMSGen.update()">
						<option value="0">Argent</option>
						<option value="1">Argent + ??? (Objet en récompense)</option>
						<option value="2">Objet</option>
						<option value="3" selected="selected">Objet + ??? (Aléatoire)</option>
						<option value="4">??? (Objet en récompense)</option>
						<option value="5">??? (Œuf)</option>
						<option value="6">??? (Recrutement du client)</option>
					</select>
				</p>
				
				<p>
					<label for="rewardItemBox">Objet en récompense :</label>
					<select name="rewardItemBox" id="rewardItemBox"></select>
				</p>
				
				<div id="advancedModeOnlyStuff" style="display: none">
					<p>
						<label for="flavorText">Type de texte :</label>
						<input id="flavorText" name="flavorText" type="text" value=""> (laisser vide pour l'automatique)
					</p>
					
					<p>
						<label for="specialFloor">Étage spécial :</label>
						<input id="specialFloor" name="specialFloor" type="text" value=""> (laisser vide pour l'automatique ; remplace même les étages spéciaux forcés !)
					</p>
				</div>
				
				<p>
					<label for="useEUswap">Version européenne :</label>
					<input type="checkbox" name="useEUswap" id="useEUswap" value="1"> (cocher pour générer un mot de passe pour la version européenne, décocher pour les versions américaine et australienne)
				</p>
				
				<p>
					<label for="generateBtn">Générer :</label>
					<button id="generateBtn" type="button" onclick="doGenerate(); return false">Générer</button>
				</p>
			</fieldset>
		</form>

		<fieldset>
			<legend>Mot de passe généré</legend>
			<textarea id="outputbox" rows="3" cols="60" readonly="readonly"></textarea>
		</fieldset>
		
<p><a href="https://sombrabsol.github.io">< Retour</a></p>
</body>
</html>
